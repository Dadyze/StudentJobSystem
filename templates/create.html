{% extends 'base.html' %}

{% block content %}
<div class="form-body">
    <div class="row justify-content-center">
        <div class="form-holder col-md-6">
            <div class="form-content">
                <div class="form-items">
                    <form class="was-validated" method="post">
                        <h3 class="header">Add your Details</h3>

                        <!-- Flash messages -->
                        <div class="error">
                            {% with messages = get_flashed_messages() %}
                                {% if messages %}
                                    {% for message in messages %}
                                        <div class="alert alert-info alert-dismissible fade show">
                                            {{ message }}
                                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% endwith %}
                        </div>

                        <!-- Registration Number -->
                        <div class="form-group">
                            <input class="form-control" type="text" name="regno" placeholder="Registration Number"
                                   oninput="this.value = this.value.toUpperCase()" minlength="9" maxlength="9" required>
                            <div class="valid-feedback">Registration Number field is valid!</div>
                            <div class="invalid-feedback">Registration Number field cannot be blank!</div>
                        </div>

                        <!-- First Name -->
                        <div class="form-group">
                            <input class="form-control" type="text" name="fname" placeholder="First Name" required>
                            <div class="valid-feedback">First Name field is valid!</div>
                            <div class="invalid-feedback">First Name field cannot be blank!</div>
                        </div>

                        <!-- Last Name -->
                        <div class="form-group">
                            <input class="form-control" type="text" name="lname" placeholder="Last Name" required>
                            <div class="valid-feedback">Last Name field is valid!</div>
                            <div class="invalid-feedback">Last Name field cannot be blank!</div>
                        </div>

                        <!-- Date of Birth -->
                        <div class="form-group">
                            <label for="year">Enter Date Of Birth</label>
                            <input type="date" id="year" name="year" min="1996-01-01" max="2002-12-31" class="form-control" required>
                        </div>

                        <!-- Email -->
                        <div class="form-group">
                            <input class="form-control" type="email" name="email" placeholder="E-mail Address" required>
                            <div class="valid-feedback">Email field is valid!</div>
                            <div class="invalid-feedback">Email field cannot be blank!</div>
                        </div>

                        <!-- Phone -->
                        <div class="form-group">
                            <input class="form-control" type="tel" name="phone" placeholder="Phone Number" pattern="^\d{10}$" required>
                            <div class="valid-feedback">Phone Number field is valid!</div>
                            <div class="invalid-feedback">Phone Number field cannot be blank!</div>
                        </div>

                        <!-- Address -->
                        <div class="form-group">
                            <input class="form-control" type="text" name="address" placeholder="Address" minlength="10" maxlength="40" required>
                            <div class="valid-feedback">Address field is valid!</div>
                            <div class="invalid-feedback">Address field cannot be blank!</div>
                        </div>

                        <!-- Gender -->
                        <div class="form-group">
                            <label>Gender: </label><br>
                            <input type="radio" class="btn-check" name="gender" id="male" value="M" required>
                            <label class="btn btn-outline-secondary btn-sm" for="male">Male</label>

                            <input type="radio" class="btn-check" name="gender" id="female" value="F" required>
                            <label class="btn btn-outline-secondary btn-sm" for="female">Female</label>

                            <input type="radio" class="btn-check" name="gender" id="secret" value="S" required>
                            <label class="btn btn-outline-secondary btn-sm" for="secret">Secret</label>
                        </div>

                        <!-- Type of Course -->
                        <div class="form-group">
                            <label>Type of Course: </label><br>
                            <input type="radio" class="btn-check" name="type" id="ug" value="UG" required>
                            <label class="btn btn-outline-secondary btn-sm" for="ug">UG</label>

                            <input type="radio" class="btn-check" name="type" id="pg" value="PG" required>
                            <label class="btn btn-outline-secondary btn-sm" for="pg">PG</label>
                        </div>

                        <!-- Course Dropdown -->
                        <div class="form-group">
                            <label for="course">Select Course:</label>
                            <select class="form-control" name="course" id="course" required>
                                <option value="" disabled selected>Select your course</option>
                            </select>
                        </div>

                        <!-- CGPA -->
                        <div class="form-group">
                            <input class="form-control" type="number" step="0.01" name="cgpa" placeholder="CGPA" required>
                        </div>

                        <!-- Current Semester -->
                        <div class="form-group">
                            <input class="form-control" type="number" name="cursem" placeholder="Current Semester" max="8" required>
                        </div>

                        <!-- Faculty Advisor -->
                        <div class="form-group">
                            <input class="form-control" type="text" name="fa" placeholder="Faculty Advisor" minlength="3" required>
                        </div>

                        <!-- Confirm Checkbox -->
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                            <label class="form-check-label">I confirm that all data are correct</label>
                        </div>

                        <!-- Buttons -->
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">Register</button>
                            <a href="/home" class="btn btn-dark">Back to Home</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for dynamic dropdown -->
<script>
    const ugCourses = [
        "Bachelor of Technology, Mechanical Engineering",
        "Bachelor of Technology, Chemical Engineering",
        "Bachelor of Technology, Computer Science Engineering",
        "Bachelor of Technology, Electrical Engineering",
        "Bachelor of Technology, Electronics and Communication Engineering"
    ];

    const pgCourses = [
        "Master in Computer Applications",
        "Master of Technology, Mechanical Engineering",
        "Master of Technology, Chemical Engineering",
        "Master of Technology, Computer Science Engineering",
        "Master of Technology, Electrical Engineering",
        "Master of Technology, Electronics and Communication Engineering"
    ];

    const courseSelect = document.getElementById('course');
    const typeRadios = document.querySelectorAll('input[name="type"]');

    typeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            // Clear previous options
            courseSelect.innerHTML = '<option value="" disabled selected>Select your course</option>';

            // Choose UG or PG courses
            const courses = this.value === 'UG' ? ugCourses : pgCourses;

            // Populate dropdown
            courses.forEach(course => {
                const option = document.createElement('option');
                option.value = course;
                option.textContent = course;
                courseSelect.appendChild(option);
            });
        });
    });
</script>

{% endblock %}
